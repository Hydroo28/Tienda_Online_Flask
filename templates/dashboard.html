<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel de Gestión - {{ tienda }}</title>
</head>
<body>

    {%if pagina == "inicio"%}
    <header>
        <nav>
            <button>Inicio</button>
            <button>Productos</button>
            <button></button>
        </nav>
    </header>
    <main>
        <h1>Hola {{ nombre_admin }}, bienvenido al panel de {{ tienda }}</h1>
        <p>Fecha actual: {{ fecha }}</p>
    <hr>
    </main>

    {%else%}


    
    <h2>Catálogo de Productos</h2>
    <table border="1">
        <tr>
            <th>Nombre</th><th>Precio</th><th>Categoría</th><th>Stock</th>
        </tr>
        {% for producto in productos %}
        <tr>
            <td>{{ producto.nombre }}</td>
            <td>${{ producto.precio }}</td>
            <td>{{ producto.categoria }}</td>
            <td>
                {% if producto.stock > 0 %}
                    {{ producto.stock }}
                {% else %}
                    <strong>Agotado</strong>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    <p><strong>Total en stock:</strong> {{ total_stock }}</p>

    <hr>
    <h2>Clientes</h2>
    <ul>
        {% for cliente in clientes %}
        <li>
            {{ cliente.nombre }} ({{ cliente.email }}) - 
            {% if cliente.activo %}Activo{% else %}Inactivo{% endif %} - 
            Pedidos: {{ cliente.pedidos }}
        </li>
        {% endfor %}
    </ul>
    <p><strong>Clientes activos:</strong> {{ clientes_activos }}</p>
    <p><strong>Cliente con más pedidos:</strong> {{ cliente_top.nombre }} ({{ cliente_top.pedidos }} pedidos)</p>

    <hr>
    <h2>Pedidos Recientes</h2>
    <table border="1">
        <tr>
            <th>Cliente</th><th>Total</th><th>Fecha</th>
        </tr>
        {% for pedido in pedidos %}
        <tr>
            <td>{{ pedido.cliente }}</td>
            <td>${{ pedido.total }}</td>
            <td>{{ pedido.fecha }}</td>
        </tr>
        {% endfor %}
    </table>
    <p><strong>Ingreso total:</strong> ${{ ingreso_total }}</p>
    {%endif%}
</body>
</html>
